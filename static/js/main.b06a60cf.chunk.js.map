{"version":3,"sources":["charts/DurationsChart.tsx","table/ComparisonsTable.tsx","App.tsx","reportWebVitals.ts","index.tsx","../index.ts"],"names":["EChartDataType","colors","background","border","datasetsBase","label","dataProperty","chartCompatibleData","data","mockDataSize","chartDataType","IPC_METHODS_WITH_DATA","Object","values","EIPCMethod","filter","method","some","d","ipcMethod","chartData","propData","stats","map","statisticsByMockDataSize","find","s","TheOperationDurationMs","AVERAGES","averages","runs","overheadDurationMs","propDataToChartData","labels","datasets","i","backgroundColor","borderColor","borderWidth","options","scales","y","title","display","text","stacked","x","DurationsChart","dataProp","mockDataSizeProp","chartDataColdStart","COLD_STARTS","chartDataAverages","numberOfRuns","id","type","width","height","href","tableDataByMockDataSize","comparisonToBenchmark","cellMapper","row","value","msTarget","pctTarget","isZero","original","isPositive","Number","toFixed","style","color","ComparisonsTable","columns","Header","accessor","Cell","Table","useTable","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","getRowProps","cells","cell","getCellProps","availableDatasets","date","App","useState","length","selectedDataset","setSelectedDataset","selectedMockDataSize","setSelectedMockDataSize","className","target","rel","console","log","OptionsSelectors","onChange","e","ad","ds","EMockDataSize","mds","size","selectFn","activeSize","MockDataSelectorButton","margin","disabled","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b06a60cf.chunk.js","sourcesContent":["import React from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  TAnalyzedStatisticsForIPCMethodWithComparisons,\n  EMockDataSize,\n  EIPCMethod,\n} from 'ipc-benchmark-testing-types';\nimport { TDataRenderingProps } from '../App';\n\nconst colors = [\n  {\n    background: 'rgba(255, 159, 64, 0.2)',\n    border: 'rgba(255, 159, 64, 1)',\n  },\n  {\n    background: 'rgba(75, 192, 192, 0.2)',\n    border: 'rgba(75, 192, 192, 1)',\n  },\n];\n\nenum EChartDataType {\n  AVERAGES = 'averages',\n  COLD_STARTS = 'cold-starts',\n}\n\nconst propDataToChartData = (\n  propData: TAnalyzedStatisticsForIPCMethodWithComparisons[],\n  mockDataSize: EMockDataSize,\n  chartDataType: EChartDataType,\n): { TheOperationDurationMs: number[]; overheadDurationMs: number[] } => {\n  const stats = propData.map(d =>\n    d.statisticsByMockDataSize.find(s => s.mockDataSize === mockDataSize),\n  );\n\n  const TheOperationDurationMs = stats?.map(s =>\n    chartDataType === EChartDataType.AVERAGES\n      ? s?.averages.TheOperationDurationMs || 0\n      : s?.runs[0].TheOperationDurationMs || 0,\n  );\n\n  const overheadDurationMs = stats?.map(s =>\n    chartDataType === EChartDataType.AVERAGES\n      ? s?.averages.overheadDurationMs || 0\n      : s?.runs[0].overheadDurationMs || 0,\n  );\n\n  return { TheOperationDurationMs, overheadDurationMs };\n};\n\nconst datasetsBase: {\n  label: string;\n  dataProperty: 'TheOperationDurationMs' | 'overheadDurationMs';\n}[] = [\n  {\n    label: 'TheOperation duration (ms)',\n    dataProperty: 'TheOperationDurationMs',\n  },\n  {\n    label: 'Overhead duration (ms)',\n    dataProperty: 'overheadDurationMs',\n  },\n];\n\nconst chartCompatibleData = (\n  data: TAnalyzedStatisticsForIPCMethodWithComparisons[],\n  mockDataSize: EMockDataSize,\n  chartDataType: EChartDataType,\n) => {\n  /**\n   * Not all methods that exist have data. This is because the methods are\n   * implemented one at a time, and when new EIPCMethods are added to the type,\n   * they aren't added to the old datasets.\n   */\n  const IPC_METHODS_WITH_DATA: EIPCMethod[] = Object.values(EIPCMethod).filter(\n    method => data.some(d => d.ipcMethod === method),\n  );\n\n  const chartData = propDataToChartData(data, mockDataSize, chartDataType);\n\n  return {\n    labels: IPC_METHODS_WITH_DATA,\n    datasets: datasetsBase.map((d, i) => ({\n      label: d.label,\n      data: chartData[d.dataProperty],\n      backgroundColor: colors[i].background,\n      borderColor: colors[i].border,\n      borderWidth: 1,\n    })),\n  };\n};\n\nconst options = {\n  scales: {\n    y: {\n      title: {\n        display: true,\n        text: 'Milliseconds',\n      },\n      stacked: true,\n    },\n    x: {\n      stacked: true,\n    },\n  },\n};\n\nconst DurationsChart = ({\n  dataProp,\n  mockDataSizeProp,\n}: TDataRenderingProps) => {\n  const chartDataColdStart = chartCompatibleData(\n    dataProp,\n    mockDataSizeProp,\n    EChartDataType.COLD_STARTS,\n  );\n  const chartDataAverages = chartCompatibleData(\n    dataProp,\n    mockDataSizeProp,\n    EChartDataType.AVERAGES,\n  );\n\n  const { numberOfRuns } = dataProp[0].statisticsByMockDataSize[0];\n\n  return (\n    <div id=\"durations-chart\">\n      <h3>Durations by IPC method</h3>\n\n      <h4>Cold start durations</h4>\n      <Bar\n        type=\"bar\"\n        width={800}\n        height={500}\n        data={chartDataColdStart}\n        options={options}\n      />\n\n      <h4>Averages over {numberOfRuns} concurrent invocations</h4>\n      <Bar\n        type=\"bar\"\n        width={800}\n        height={500}\n        data={chartDataAverages}\n        options={options}\n      />\n\n      <p>\n        <i>\n          <b>Tip:</b> click dataset name to hide it from the chart, and hover\n          for tooltips.\n        </i>\n      </p>\n\n      <p>\n        <b>TheOperation duration</b> describes how many milliseconds it took to\n        run{' '}\n        <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/blob/main/shared/TheOperation.ts\">\n          TheOperation\n        </a>{' '}\n        for the given mock data size. The timing starts only when inside the\n        function, so the IPC method doesn't affect its running time.\n      </p>\n\n      <p>\n        <b>Overhead duration</b> describes how many milliseconds it took to pass\n        the data from{' '}\n        <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/blob/main/shared/mainProcess.ts\">\n          mainProcess\n        </a>{' '}\n        to TheOperation and back, excluding the time that running TheOperation\n        took. So basically it shows the cost of serializing the data and passing\n        it back and forth between the containers (or just between the two\n        functions in benchmark's case).\n      </p>\n\n      <p>\n        <b>Cold start durations</b> are measured by the first run, assuming both\n        containers are already running.\n      </p>\n\n      <p>\n        <b>Averages over {numberOfRuns} concurrent executions</b> measures the\n        performance under concurrent load.\n      </p>\n    </div>\n  );\n};\n\nexport default DurationsChart;\n","import React from 'react';\nimport { Column, Row, useTable } from 'react-table';\nimport { EIPCMethod } from 'ipc-benchmark-testing-types';\nimport { TDataRenderingProps } from '../App';\n\ntype TTableData = {\n  ipcMethod: EIPCMethod;\n  durationMs: number;\n  durationToBenchmarkMs: number;\n  durationToBenchmarkPct: number;\n  TheOperationDurationMs: number;\n  TheOperationDurationToBenchmarkMs: number;\n  TheOperationDurationToBenchmarkPct: number;\n  overheadDurationMs: number;\n  overheadDurationToBenchmarkMs: number;\n  overheadDurationToBenchmarkPct: number;\n  overheadPercentage: number;\n};\n\nconst tableDataByMockDataSize = ({\n  dataProp,\n  mockDataSizeProp,\n}: TDataRenderingProps): TTableData[] =>\n  dataProp.map(d => {\n    const { averages, comparisonToBenchmark } = d.statisticsByMockDataSize.find(\n      s => s.mockDataSize === mockDataSizeProp,\n    )!;\n\n    return {\n      ipcMethod: d.ipcMethod,\n      ...averages,\n      ...comparisonToBenchmark,\n    };\n  });\n\nconst cellMapper = ({\n  row,\n  value,\n  msTarget,\n  pctTarget,\n}: {\n  row: Row<TTableData>;\n  value: number;\n  msTarget: keyof TTableData;\n  pctTarget: keyof TTableData;\n}) => {\n  const isZero = row.original[msTarget] === 0;\n  const isPositive = row.original[msTarget] > 0;\n  return (\n    <span>\n      {Number(value).toFixed(0)} ms\n      <br />\n      {!isZero && (\n        <span style={{ color: isPositive ? 'red' : 'green' }}>\n          ({isPositive ? '▲' : '▼'} {Number(row.original[msTarget]).toFixed(0)}{' '}\n          ms / {Number(row.original[pctTarget]).toFixed(0)} %)\n        </span>\n      )}\n    </span>\n  );\n};\n\nexport default function ComparisonsTable({\n  dataProp,\n  mockDataSizeProp,\n}: TDataRenderingProps) {\n  const columns: Column<TTableData>[] = [\n    {\n      Header: 'IPC method',\n      accessor: 'ipcMethod',\n    },\n    {\n      Header: 'Full duration (compared to benchmark)',\n      accessor: 'durationMs',\n      Cell: ({ row, value }) =>\n        cellMapper({\n          row,\n          value,\n          msTarget: 'durationToBenchmarkMs',\n          pctTarget: 'durationToBenchmarkPct',\n        }),\n    },\n    {\n      Header: 'TheOperation duration (compared to benchmark)',\n      accessor: 'TheOperationDurationMs',\n      Cell: ({ row, value }) =>\n        cellMapper({\n          row,\n          value,\n          msTarget: 'TheOperationDurationToBenchmarkMs',\n          pctTarget: 'TheOperationDurationToBenchmarkPct',\n        }),\n    },\n    {\n      Header: 'Overhead duration (compared to benchmark)',\n      accessor: 'overheadDurationMs',\n      Cell: ({ row, value }) =>\n        cellMapper({\n          row,\n          value,\n          msTarget: 'overheadDurationToBenchmarkMs',\n          pctTarget: 'overheadDurationToBenchmarkPct',\n        }),\n    },\n    {\n      Header: 'Overhead %',\n      accessor: 'overheadPercentage',\n      Cell: ({ value }) => <span>{Number(value).toFixed(0)}</span>,\n    },\n  ];\n\n  return (\n    <div>\n      <h3>Durations compared</h3>\n      <h4>\n        Averages over {dataProp[0].statisticsByMockDataSize[0].numberOfRuns}{' '}\n        concurrent runs\n      </h4>\n      <Table\n        columns={columns}\n        data={tableDataByMockDataSize({ dataProp, mockDataSizeProp })}\n      />\n    </div>\n  );\n}\n\nfunction Table({\n  columns,\n  data,\n}: {\n  columns: Column<TTableData>[];\n  data: TTableData[];\n}) {\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } =\n    useTable<TTableData>({\n      columns,\n      data,\n    });\n\n  return (\n    <div id=\"comparisons-table-wrapper\">\n      <table id=\"comparisons-table\" {...getTableProps()}>\n        <thead>\n          {headerGroups.map(headerGroup => (\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map(column => (\n                <th {...column.getHeaderProps()}>{column.render('Header')}</th>\n              ))}\n            </tr>\n          ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {rows.map(row => {\n            prepareRow(row);\n            return (\n              <tr {...row.getRowProps()}>\n                {row.cells.map(cell => {\n                  return (\n                    <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  TAnalyzedStatisticsForIPCMethodWithComparisons,\n  EMockDataSize,\n} from 'ipc-benchmark-testing-types';\nimport DurationsChart from './charts/DurationsChart';\nimport ComparisonsTable from './table/ComparisonsTable';\n\n// Make all desired datasets available by importing here\nimport data_2021_06_30 from './data/2021-6-30.analyzed.publish.json';\nimport data_2021_07_10 from './data/2021-7-10.analyzed.publish.json';\nimport data_2021_07_11 from './data/2021-7-11.analyzed.publish.json';\n\ntype TDataAndDate = {\n  data: TAnalyzedStatisticsForIPCMethodWithComparisons[];\n  date: string; // like 2021-05-31\n};\n\nconst availableDatasets: TDataAndDate[] = [\n  {\n    data: data_2021_06_30 as unknown as TAnalyzedStatisticsForIPCMethodWithComparisons[],\n    date: '2021-06-30',\n  },\n  {\n    data: data_2021_07_10 as unknown as TAnalyzedStatisticsForIPCMethodWithComparisons[],\n    date: '2021-07-10',\n  },\n  {\n    data: data_2021_07_11 as unknown as TAnalyzedStatisticsForIPCMethodWithComparisons[],\n    date: '2021-07-11',\n  },\n];\n\nexport type TDataRenderingProps = {\n  dataProp: TAnalyzedStatisticsForIPCMethodWithComparisons[];\n  mockDataSizeProp: EMockDataSize;\n};\n\nfunction App() {\n  const [selectedDataset, setSelectedDataset] = useState<TDataAndDate>(\n    availableDatasets[availableDatasets.length - 1],\n  );\n\n  const [selectedMockDataSize, setSelectedMockDataSize] =\n    useState<EMockDataSize>('medium' as EMockDataSize.MEDIUM);\n\n  return (\n    <div className=\"App-wrapper\">\n      <div className=\"App\">\n        <header>\n          <h1>IPC method latency testing</h1>\n          <p>\n            By <a href=\"https://github.com/anttispitkanen\">@anttispitkanen</a>\n          </p>\n        </header>\n\n        <div className=\"main-content\">\n          <section>\n            <p>\n              This is{' '}\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing\">\n                a project\n              </a>{' '}\n              that compares the latency cost of different methods of\n              transferring data between two containers in the same loopback\n              network interface, like a Kubernetes pod or ECS task, i.e. without\n              having to worry about network latency.{' '}\n              <a\n                href=\"https://en.wikipedia.org/wiki/Inter-process_communication\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                See Wikipedia on inter-process communication (IPC)\n              </a>\n              .\n            </p>\n\n            <p>\n              See{' '}\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing\">\n                the repo\n              </a>{' '}\n              for more information on how this works and how to run the tests\n              yourself.\n            </p>\n\n            <p>See console for raw data.</p>\n\n            {console.log('Here are the analyzed results:')}\n            {console.log(selectedDataset.data)}\n\n            <p>\n              All tests run on MacBook Air M1 2020 16 GB, Docker Desktop for\n              Mac, Docker engine{' '}\n              <span className=\"monospace-highlight\">v20.10.7</span>, at settings\n              of <span className=\"monospace-highlight\">4 CPU</span>,{' '}\n              <span className=\"monospace-highlight\">2 GB RAM</span> and{' '}\n              <span className=\"monospace-highlight\">1 GB Swap</span>.\n            </p>\n          </section>\n\n          <hr />\n\n          <section>\n            <h2>How this works</h2>\n\n            <p>\n              This test doesn't aim to be highly generalizable, but rather very\n              specific. Basically there is simple JSON mock data (\"comments\" as\n              provided by{' '}\n              <a href=\"https://jsonplaceholder.typicode.com/comments\">\n                JSONPlaceholder\n              </a>\n              ) in three different sizes:\n            </p>\n\n            <ul>\n              <li>small = 1.5K</li>\n              <li>medium = 154K</li>\n              <li>large = 770K</li>\n            </ul>\n\n            <p>\n              To simulate whatever the computationally intensive operation would\n              be, there's{' '}\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/blob/main/shared/TheOperation.ts\">\n                \"TheOperation\"\n              </a>\n              . It takes the mock data and runs some arbitrary synchronous\n              blocking operations on it: finding out the shortest and longest\n              comment names, and finding the top 5 most commonly used words in\n              the comment bodies. It responds with this data, along with the\n              time it took to process the data.\n            </p>\n            <p>\n              The actual test runs a{' '}\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/blob/main/shared/mainProcess.ts\">\n                \"main process\"\n              </a>{' '}\n              script, that loads the mock data into memory and passes it to\n              \"TheOperation\" with the desired data transport method given as a\n              dependency injection. All the different methods run the same\n              TheOperation script, the difference is in how the data is passed\n              to TheOperation (i.e. over HTTP).\n            </p>\n            <p>\n              \"Main process\" runs and takes time of the whole thing. It\n              calculates the results:\n            </p>\n            <ul>\n              <li>\n                The whole process duration including data transfer latency and\n                running TheOperation\n              </li>\n              <li>The duration of TheOperation</li>\n              <li>\n                Overhead duration = whole duration - TheOperation duration\n              </li>{' '}\n              <li>\n                Overhead percentage, i.e. how many percent of the whole duration\n                was in the overhead\n              </li>\n            </ul>\n\n            <p>There are two different cases that are analyzed:</p>\n            <ul>\n              <li>\n                <b>Cold start</b>, the first run. Both containers are already up\n                and running, but the initial connection between them needs to be\n                established.\n              </li>\n              <li>\n                <b>Averages</b> over <i>N</i> concurrent runs, simulating a\n                steady load. Cold start is essentially the first of these{' '}\n                <i>N</i> runs.\n              </li>\n            </ul>\n          </section>\n\n          <hr />\n\n          <section>\n            <h2>Tested IPC methods</h2>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/benchmark\">\n                <b>benchmark</b>\n              </a>{' '}\n              just runs main process and TheOperation in the same process,\n              handling all the data in memory without need to (de)serialize it.\n              There is no real overhead in transporting the data, but whatever\n              \"overhead\" is spent is the baseline that the other methods are\n              compared to.\n            </p>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/unix-socket\">\n                <b>unix-socket</b>\n              </a>{' '}\n              uses the Nodejs built-in{' '}\n              <span className=\"monospace-highlight\">net</span> library over a\n              Unix socket to transport the data between a client and a server\n              running TheOperation. The data is serialized using JSON, with a\n              custom delimiter character set. The Unix socket file is shared to\n              both containers using a named Docker Volume in the compose file.\n            </p>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/tcp\">\n                <b>tcp</b>\n              </a>{' '}\n              uses TCP with the Nodejs built-in{' '}\n              <span className=\"monospace-highlight\">net</span> library, to\n              transport the data between a client running main process and a\n              server running TheOperation. The data is serialized using JSON\n              with a custom delimiter character set.\n            </p>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/http\">\n                <b>http</b>\n              </a>{' '}\n              uses \"raw\" HTTP, meaning the Nodejs built-in{' '}\n              <span className=\"monospace-highlight\">http</span> library, to\n              transport the data between a client running main process and a\n              server running TheOperation. The data is serialized using JSON.\n            </p>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/http-express-axios\">\n                <b>http-express-axios</b>\n              </a>{' '}\n              uses the commonly used Nodejs HTTP server Express and the commonly\n              used Nodejs HTTP client Axios. Data is serialized as JSON, and the\n              parsing and serializing is handled by the libraries under the\n              hood.\n            </p>\n\n            <p>\n              <a href=\"https://github.com/anttispitkanen/ipc-benchmark-testing/tree/main/ipc-methods/https\">\n                <b>https</b>\n              </a>{' '}\n              uses self signed certificates to provide TLS for a HTTPS\n              connection, using the Nodejs built-in{' '}\n              <span className=\"monospace-highlight\">https</span> library, to\n              transport the data between a client and a server running\n              TheOperation. The data is serialized using JSON.\n            </p>\n          </section>\n\n          <hr />\n\n          <section>\n            <h2>Results</h2>\n\n            <OptionsSelectors\n              selectedDataset={selectedDataset}\n              setSelectedDataset={setSelectedDataset}\n              selectedMockDataSize={selectedMockDataSize}\n              setSelectedMockDataSize={setSelectedMockDataSize}\n            />\n\n            <DurationsChart\n              dataProp={selectedDataset.data}\n              mockDataSizeProp={selectedMockDataSize}\n            />\n\n            <OptionsSelectors\n              selectedDataset={selectedDataset}\n              setSelectedDataset={setSelectedDataset}\n              selectedMockDataSize={selectedMockDataSize}\n              setSelectedMockDataSize={setSelectedMockDataSize}\n            />\n\n            <ComparisonsTable\n              dataProp={selectedDataset.data}\n              mockDataSizeProp={selectedMockDataSize}\n            />\n\n            <OptionsSelectors\n              selectedDataset={selectedDataset}\n              setSelectedDataset={setSelectedDataset}\n              selectedMockDataSize={selectedMockDataSize}\n              setSelectedMockDataSize={setSelectedMockDataSize}\n            />\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\nconst OptionsSelectors = ({\n  selectedDataset,\n  setSelectedDataset,\n  selectedMockDataSize,\n  setSelectedMockDataSize,\n}: {\n  selectedDataset: TDataAndDate;\n  setSelectedDataset: (dataset: TDataAndDate) => void;\n  selectedMockDataSize: EMockDataSize;\n  setSelectedMockDataSize: (mockDataSize: EMockDataSize) => void;\n}) => (\n  <div className=\"options-selectors\">\n    <span>\n      Viewing test suite run on:{' '}\n      <select\n        value={selectedDataset.date}\n        onChange={e =>\n          setSelectedDataset(\n            availableDatasets.find(ad => ad.date === e.target.value)!,\n          )\n        }\n      >\n        {availableDatasets.map(ds => (\n          <option key={ds.date}>{ds.date}</option>\n        ))}\n      </select>\n    </span>\n\n    <span>\n      Viewing mock data size: <b>{selectedMockDataSize}</b>\n    </span>\n\n    <span>\n      {Object.values(EMockDataSize).map(mds => (\n        <MockDataSelectorButton\n          key={mds}\n          size={mds}\n          selectFn={setSelectedMockDataSize}\n          activeSize={selectedMockDataSize}\n        />\n      ))}\n    </span>\n  </div>\n);\n\nconst MockDataSelectorButton = ({\n  size,\n  selectFn,\n  activeSize,\n}: {\n  size: EMockDataSize;\n  selectFn: (size: EMockDataSize) => void;\n  activeSize: EMockDataSize;\n}) => (\n  <button\n    style={{ margin: '5px' }}\n    disabled={size === activeSize}\n    onClick={() => selectFn(size)}\n  >\n    {size}\n  </button>\n);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EMockDataSize = exports.EIPCMethod = void 0;\n/**\n * All the IPC methods need to be defined here. Add new\n * ones here if new ones are implemented.\n */\nvar EIPCMethod;\n(function (EIPCMethod) {\n    EIPCMethod[\"BENCHMARK\"] = \"benchmark\";\n    EIPCMethod[\"UNIX_SOCKET\"] = \"unix-socket\";\n    EIPCMethod[\"TCP\"] = \"tcp\";\n    EIPCMethod[\"HTTP\"] = \"http\";\n    EIPCMethod[\"HTTP_EXPRESS_AXIOS\"] = \"http-express-axios\";\n    EIPCMethod[\"HTTPS\"] = \"https\";\n})(EIPCMethod = exports.EIPCMethod || (exports.EIPCMethod = {}));\n/**\n * All the mock data sizes need to be listed here (in a sensible)\n * order. Add new ones here if new ones are implemented.\n */\nvar EMockDataSize;\n(function (EMockDataSize) {\n    EMockDataSize[\"SMALL\"] = \"small\";\n    EMockDataSize[\"MEDIUM\"] = \"medium\";\n    EMockDataSize[\"LARGE\"] = \"large\";\n})(EMockDataSize = exports.EMockDataSize || (exports.EMockDataSize = {}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}